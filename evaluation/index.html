
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Evaluating and Testing</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/banner.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="next" title="Domain Format" href="../domains/" />
    <link rel="prev" title="Debugging" href="../debugging/" />
   
    
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />
  <meta itemprop="image" content="https://rasa.com/assets/img/facebook-og.png">
  <meta property="og:title" content="Evaluating and Testing" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://rasa.com/assets/img/facebook-og.png" />
  <meta property="og:url" content="https://rasa.com/docs/core/evaluation" />
  
    <meta name="description" content="How to evaluate a Rasa Core model" />
    <meta itemprop="description" content="How to evaluate a Rasa Core model">
    <meta name="twitter:description" content="How to evaluate a Rasa Core model" />
    <meta property="og:description" content="How to evaluate a Rasa Core model" />
  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@Rasa_HQ">
  <meta name="twitter:title" content="Evaluating and Testing">
  <meta name="twitter:creator" content="@Rasa_HQ">
  <meta name="twitter:image" content="https://rasa.com/assets/img/facebook-og.png">
    
  <link rel="stylesheet" href="../_static/xq-light.css" type="text/css" />
  <link rel="stylesheet" href="../_static/fontawesome/css/fontawesome-all.css" type="text/css" />
  <script defer type="text/javascript" src="../_static/config.js"></script>
  <script defer type="text/javascript" src="../_static/klaro.js"></script>
  <script type="text/javascript" src="https://storage.googleapis.com/docs-theme/clipboard.min.js"></script>
  
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" /> 
  

  </head><body>

<div class="nav-top">
  <a href="/docs" class="brand-link">
      <h1 class="brand">
          <img src="../_static/rasa_logo.svg" width="80px" height="40px" title="Rasa" alt="Rasa logo">
      </h1>
      <span class="logo extension">docs</span>
  </a>
  
  <ul class="nav">
    <input type="text" class="search" placeholder="Search">
    
      
        <li><a href=/docs/getting-started>Getting Started</a></li>
      
    
      
        <li><a href=/docs/nlu>NLU</a></li>
      
    
      
        <li class="active"><a href=/docs/core>Core</a></li>
      
    
      
        <li><a href=/docs/platform>Platform</a></li>
      
    
    
    <li>
      <a href="https://forum.rasa.com" target="_blank"><button class="button btn-ghost btn-small">Join Community</button></a>
    </li>
    
  </ul>
</div>

  <div class="sidebar-extended"></div>
  <div class="document">
    
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/">Installation</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../architecture/">High-Level Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connectors/">Chat &amp; Voice platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../customactions/">Custom Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../slots/">Using Slots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../slotfilling/">Slot Filling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../responses/">Bot Responses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interactive_learning/">Interactive Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fallbacks/">Fallback Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../policies/">Training and Policies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../debugging/">Debugging</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Evaluating and Testing</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../domains/">Domain Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stories/">Story Data Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/slots_api/">Slot Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/">Server Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../http/">HTTP API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/agent/">Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/events/">Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/tracker/">Dialogue State Tracker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/interpreter/">Interpreters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/policy/">Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/featurizer/">Featurization</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../migrations/">Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog/">Change Log</a></li>
</ul>

<div class="versions">
    <div>
      <span class="current-version">
        v: 0.10.4
      </span>
    </div>
    <div class="other-versions">
        <div class="dropdown">
          <button class="dropdown-btn">tags</button>
          <div class="dropdown-content">
              <a href=".././0.10.4/evaluation/">0.10.4</a>
              <a href=".././0.9.8/index/">0.9.8</a>
              <a href=".././0.8.6/index/">0.8.6</a>
              <a href=".././0.7.9/index/">0.7.9</a>
              <a href=".././0.6.9/index/">0.6.9</a>
          </div>
        </div>
        <div class="dropdown">
          <button class="dropdown-btn">tags</button>
          <div class="dropdown-content">
              <a href=".././lappis-unb-master/evaluation/">lappis-unb-master</a>
              <a href=".././master/evaluation/">master</a>
              <a href=".././tupac56-master/evaluation/">tupac56-master</a>
          </div>
        </div>
    </div>
</div>


        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  





<div class="section" id="evaluating-and-testing">
<span id="evaluation"></span><h1>Evaluating and Testing<a class="headerlink" href="#evaluating-and-testing" title="Permalink to this headline">¶</a></h1>
<div class="section" id="evaluating-a-trained-model">
<h2>Evaluating a Trained Model<a class="headerlink" href="#evaluating-a-trained-model" title="Permalink to this headline">¶</a></h2>
<p>You can evaluate your trained model on a set of test stories by using the evaluate script:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -m rasa_core.evaluate -d models/dialogue -s test_stories.md -o matrix.pdf --failed failed_stories.md
</pre></div>
</div>
<p>This will print the failed stories to <code class="docutils literal notranslate"><span class="pre">failed_stories.md</span></code>.
We count any story as <cite>failed</cite> if at least one of the actions was predicted incorrectly.</p>
<p>In addition, this will save a confusion matrix to a file called <code class="docutils literal notranslate"><span class="pre">matrix.pdf</span></code>.
The confusion matrix shows, for each action in your domain, how often that action
was predicted, and how often an incorrect action was predicted instead.</p>
<p>The full list of options for the script is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>RuntimeError: module compiled against API version 0xc but this version of numpy is 0xb
RuntimeError: module compiled against API version 0xc but this version of numpy is 0xb
usage: evaluate.py [-h] -s STORIES [-m MAX_STORIES] -d CORE [-u NLU]
                   [-o OUTPUT] [--failed FAILED] [-v] [-vv] [--quiet]

evaluates a dialogue model

optional arguments:
  -h, --help            show this help message and exit
  -s STORIES, --stories STORIES
                        file or folder containing stories to evaluate on
  -m MAX_STORIES, --max_stories MAX_STORIES
                        maximum number of stories to test on
  -d CORE, --core CORE  core model to run with the server
  -u NLU, --nlu NLU     nlu model to run with the server. None for regex
                        interpreter
  -o OUTPUT, --output OUTPUT
                        output path for the created evaluation plot. If set to
                        Noneor an empty string, no plot will be generated.
  --failed FAILED       output path for the failed stories
  -v, --verbose         Be verbose. Sets logging level to INFO
  -vv, --debug          Print lots of debugging statements. Sets logging level
                        to DEBUG
  --quiet               Be quiet! Sets logging level to WARNING
</pre></div>
</div>
</div>
<div class="section" id="comparing-policies">
<h2>Comparing Policies<a class="headerlink" href="#comparing-policies" title="Permalink to this headline">¶</a></h2>
<p>To choose a specific policy, or to choose hyperparameters for a specific policy, you want
to measure how well Rasa Core will <cite>generalise</cite> to conversations which it hasn’t seen before.
Especially in the beginning of a project, you do not have a lot of real conversations to use to train
your bot, so you don’t just want to throw some away to use as a test set.</p>
<p>Rasa Core has some scripts to help you choose and fine-tune your policy. Once you are happy
with it, you can then train your final policy on your full data set.
To do this, split your training data into multiple files in a single directory.
You can then use the <code class="docutils literal notranslate"><span class="pre">train_paper</span></code> script to train multiple policies on the same data.
You can choose one of the files to be partially excluded. This means that Rasa Core
will be trained multiple times, with 0, 5, 25, 50, 70, 90, 95, and 100% of the stories
in that file removed from the training data. By evaluating on the full set of stories, you
can measure how well Rasa Core is predicting the held-out stories.</p>
<p>The full list of options for the script is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/home/travis/virtualenv/python2.7.14/bin/python: No module named rasa_core.train_paper
</pre></div>
</div>
<p>The full list of options for the evaluation script is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/home/travis/virtualenv/python2.7.14/bin/python: No module named rasa_core.evaluate_paper
</pre></div>
</div>
</div>
</div>


	    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script> 
	    <script type="text/javascript"> docsearch({ 
	     apiKey: '1f9e0efb89e98543f6613a60f847b176', 
	     indexName: 'rasa', 
	     inputSelector: 'body > div.nav-top > .nav > input', 
	     debug: false // Set debug to true if you want to inspect the dropdown 
	    }); 
	    </script> 
          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2018, Rasa Technologies GmbH | <a href="https://rasa.com/imprint/" target="_blank">Imprint</a> | <a href="https://rasa.com/privacy-policy/" target="_blank">Privacy Policy</a> 
      

    </div>

    

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async type="opt-in" data-name="googleanalytics" data-type="text/javascript" data-src="https://www.googletagmanager.com/gtag/js?id=UA-87333416-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());
    gtag('config', 'UA-87333416-1', {
      'anonymize_ip': true,
    });
  </script>
  <script type="text/javascript">
    var clipboard = new ClipboardJS('.copyable');
    clipboard.on('success', function(e) {
      console.error("CLICK");
      gtag('event', e.action, {
        'event_category': 'code',
        'event_label': e.text
      });
    });
    clipboard.on('error', function(e) {
      console.log(e);
    });
  </script>
  </body>
</html>