
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Migration Guide</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/banner.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="next" title="Tracker Stores" href="../tracker_stores/" />
    <link rel="prev" title="Dispatcher" href="../api/dispatcher/" />

 <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-MMHSZCS');</script>
    <!-- End Google Tag Manager -->
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />
  <meta itemprop="image" content="https://rasa.com/assets/img/facebook-og.png">
  <meta property="og:title" content="Migration Guide" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://rasa.com/assets/img/facebook-og.png" />
  <meta property="og:url" content="https://rasa.com/docs/core/migrations" />
  
    <meta name="description" content="Upgrading your Rasa Core Project" />
    <meta itemprop="description" content="Upgrading your Rasa Core Project">
    <meta name="twitter:description" content="Upgrading your Rasa Core Project" />
    <meta property="og:description" content="Upgrading your Rasa Core Project" />
  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@Rasa_HQ">
  <meta name="twitter:title" content="Migration Guide">
  <meta name="twitter:creator" content="@Rasa_HQ">
  <meta name="twitter:image" content="https://rasa.com/assets/img/facebook-og.png">

  <link rel="stylesheet" href="../_static/xq-light.css" type="text/css" />
  <link rel="stylesheet" href="../_static/fontawesome/css/fontawesome-all.css" type="text/css" />
  <!--<script defer type="text/javascript" src="../_static/config.js"></script>
  <script defer type="text/javascript" src="../_static/klaro.js"></script>-->
  <script type="text/javascript" src="https://storage.googleapis.com/docs-theme/clipboard.min.js"></script>
  
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />


  </head><body>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MMHSZCS" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<div class="nav-top">
  <div class="nav-container">
    <a href="/docs" class="brand-link">
        <h1 class="brand">
            <img src="../_static/rasa_logo.svg" width="80px" height="40px" title="Rasa logo" alt="Rasa logo">
        </h1>
        <span class="logo extension">docs</span>
    </a>

    <ul class="nav">
      <input type="text" class="search" placeholder="Search">
      
        
          <li><a href=/docs/nlu/>NLU</a></li>
        
      
        
          <li class="active"><a href=/docs/core/>Core</a></li>
        
      
        
          <li><a href=/docs/platform/>Platform</a></li>
        
      
      
      <li>
        <a href="https://github.com/rasaHQ/" target="_blank"><button class="button btn-ghost btn-small"> <i class="fab fa-github"></i>GitHub</button></a>
      </li>
      
      <li>
        <a href="https://forum.rasa.com" target="_blank"><button class="button btn-small">Ask the Community</button></a>
      </li>

    </ul>
  </div>
</div>

  <div class="sidebar-extended"></div>
  <div class="document">

    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/">Installation</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../architecture/">High-Level Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connectors/">Chat &amp; Voice platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../customactions/">Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../slots/">Using Slots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../slotfilling/">Slot Filling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../responses/">Bot Responses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interactive_learning/">Interactive Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fallbacks/">Fallback Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../policies/">Training and Policies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../debugging/">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../evaluation/">Evaluating and Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docker_walkthrough/">Development with Docker</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../domains/">Domain Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stories/">Story Data Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/slots_api/">Slot Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/">HTTP API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/agent/">Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/events/">Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/tracker/">Dialogue State Tracker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/interpreter/">Interpreters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/policy/">Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/featurizer/">Featurization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/dispatcher/">Dispatcher</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Documentation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tracker_stores/">Tracker Stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="../brokers/">Event Brokers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docker/">Using Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog/">Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support/">Getting Support</a></li>
</ul>

<div class="versions">
    <p class="caption">Versions</p>
    <div class="versions-content">
      <div>
        <span class="current-version">
          viewing: 0.12.2
        </span>
      </div>
      <div class="other-versions">
          <p>tags</p>
          <div class="dropdown-content">
              <a href=".././0.12.2/migrations/">0.12.2</a>
              <a href=".././0.12.1/migrations/">0.12.1</a>
              <a href=".././0.12.0/migrations/">0.12.0</a>
              <a href=".././0.11.12/migrations/">0.11.12</a>
              <a href=".././0.10.4/migrations/">0.10.4</a>
              <a href=".././0.9.8/migrations/">0.9.8</a>
              <a href=".././0.8.6/migrations/">0.8.6</a>
              <a href=".././0.7.9/index/">0.7.9</a>
              <a href=".././0.6.9/index/">0.6.9</a>
          </div>
          <p>branches</p>
          <div class="dropdown-content">
              <a href=".././master/migrations/">master</a>
          </div>
      </div>
    </div>
</div>


        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  





<div class="section" id="migration-guide">
<span id="migration"></span><h1>Migration Guide<a class="headerlink" href="#migration-guide" title="Permalink to this headline">¶</a></h1>
<p>This page contains information about changes between major versions and
how you can migrate from one version to another.</p>
<div class="section" id="x-to-0-12-0">
<span id="migration-to-0-12-0"></span><h2>0.11.x to 0.12.0<a class="headerlink" href="#x-to-0-12-0" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This is major new version with a lot of changes under the hood as well
as on the API level. Please take a careful look at the mentioned
before updating. Please make sure to
<strong>retrain your models when switching to this version</strong>.</p>
</div>
<div class="section" id="train-script">
<h3>Train script<a class="headerlink" href="#train-script" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>You <strong>must</strong> pass a policy config flag with <code class="docutils literal notranslate"><span class="pre">-c/--config</span></code> now when training
a model, see <a class="reference internal" href="../policies/#policy-file"><span class="std std-ref">Configuring polices using a configuration file</span></a>. There is a default config file in the
documentation <a class="reference internal" href="../policies/#default-config"><span class="std std-ref">Default configuration</span></a>.</li>
<li>Interactive learning is now started with
<code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">rasa_core.train</span> <span class="pre">interactive</span></code> rather than the
<code class="docutils literal notranslate"><span class="pre">--interactive</span></code> flag</li>
<li>All policy configuration related flags have been removed (<code class="docutils literal notranslate"><span class="pre">--epochs</span></code>,
<code class="docutils literal notranslate"><span class="pre">--max_history</span></code>, <code class="docutils literal notranslate"><span class="pre">--validation_split</span></code>, <code class="docutils literal notranslate"><span class="pre">--batch_size</span></code>,
<code class="docutils literal notranslate"><span class="pre">--nlu_threshold</span></code>, <code class="docutils literal notranslate"><span class="pre">--core_threshold</span></code>,
<code class="docutils literal notranslate"><span class="pre">--fallback_action_name</span></code>), specify these in the policy config file instead,
see <a class="reference internal" href="../policies/#policy-file"><span class="std std-ref">Configuring polices using a configuration file</span></a></li>
</ul>
</div>
<div class="section" id="visualisation-script">
<h3>Visualisation script<a class="headerlink" href="#visualisation-script" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>You <strong>must</strong> pass a policy config flag with <code class="docutils literal notranslate"><span class="pre">-c/--config</span></code> now,
see <a class="reference internal" href="../policies/#policy-file"><span class="std std-ref">Configuring polices using a configuration file</span></a>. There is a default config file in the
documentation <a class="reference internal" href="../policies/#default-config"><span class="std std-ref">Default configuration</span></a>.</li>
</ul>
</div>
<div class="section" id="evaluation-script">
<h3>Evaluation script<a class="headerlink" href="#evaluation-script" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">--output</span></code> flag now takes one argument: the name of the folder
any files generated from the script should be written to</li>
<li>The <code class="docutils literal notranslate"><span class="pre">--failed</span></code> flag was removed, as this is part of the <code class="docutils literal notranslate"><span class="pre">--output</span></code>
flag now</li>
</ul>
</div>
<div class="section" id="forms">
<h3>Forms<a class="headerlink" href="#forms" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Forms were completely reworked, please follow <a class="reference internal" href="../slotfilling/#slotfilling"><span class="std std-ref">Slot Filling</span></a>
for instructions how to use them.</li>
<li><code class="docutils literal notranslate"><span class="pre">FormField</span></code> class and its subclasses were removed,
overwrite <code class="docutils literal notranslate"><span class="pre">FormAction.slot_mapping()</span></code> method to specify the mapping between
user input and requested slot in the form
utilizing helper methods <code class="docutils literal notranslate"><span class="pre">FormAction.from_entity(...)</span></code>,
<code class="docutils literal notranslate"><span class="pre">FormAction.from_intent(...)</span></code> and <code class="docutils literal notranslate"><span class="pre">FormAction.from_text(...)</span></code></li>
<li>stories for forms need to be written differently,
it is recommended to use interactive learning to create form stories</li>
<li>functionality of <code class="docutils literal notranslate"><span class="pre">FormAction.get_other_slots(...)</span></code> was moved to
<code class="docutils literal notranslate"><span class="pre">FormAction.extract_other_slots(...)</span></code></li>
<li>functionality of <code class="docutils literal notranslate"><span class="pre">FormAction.get_requested_slot(...)</span></code> was moved to
<code class="docutils literal notranslate"><span class="pre">FormAction.extract_requested_slot(...)</span></code></li>
<li>overwrite <code class="docutils literal notranslate"><span class="pre">FormAction.validate(...)</span></code> method to validate user input against
the slot requested by the form</li>
</ul>
</div>
</div>
<div class="section" id="x-to-0-11-0">
<span id="migration-to-0-11-0"></span><h2>0.10.x to 0.11.0<a class="headerlink" href="#x-to-0-11-0" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This is major new version with a lot of changes under the hood as well
as on the API level. Please take a careful look at the mentioned
before updating. Please make sure to
<strong>retrain your models when switching to this version</strong>.</p>
</div>
<div class="section" id="general">
<h3>General<a class="headerlink" href="#general" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">TL;DR these are the most important surface changes. But if you have
a second please take a minute to read all of them.</p>
</div>
<ul class="simple">
<li>If you have custom actions, you now need to run a separate server to execute
them. If your actions are written in python (in a file called actions.py) you
can do this by running <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">rasa_core_sdk.endpoint</span> <span class="pre">--actions</span> <span class="pre">actions</span></code>
and specifying the action endpoint in the <code class="docutils literal notranslate"><span class="pre">endpoints.yml</span></code>
For more information please read <a class="reference internal" href="../customactions/#customactions"><span class="std std-ref">Actions</span></a>.</li>
<li>For your custom actions, the imports have changed from
<code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">rasa_core.actions</span> <span class="pre">import</span> <span class="pre">Action</span></code> to <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">rasa_core_sdk</span> <span class="pre">import</span> <span class="pre">Action</span></code> and
from <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">rasa_core.events</span> <span class="pre">import</span> <span class="pre">*</span></code> to <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">rasa_core_sdk.events</span> <span class="pre">import</span> <span class="pre">*</span></code></li>
<li>The actions list in the domain now needs to always contain the actions names
instead of the classpath (e.g. change <code class="docutils literal notranslate"><span class="pre">actions.ActionExample</span></code> to <code class="docutils literal notranslate"><span class="pre">action_example</span></code>)</li>
<li>utter templates that should be used as actions, now need to start with
<code class="docutils literal notranslate"><span class="pre">utter_</span></code>, otherwise the bot won’t be able to find the action</li>
</ul>
</div>
<div class="section" id="http-server-endpoints">
<h3>HTTP Server endpoints<a class="headerlink" href="#http-server-endpoints" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>We removed <code class="docutils literal notranslate"><span class="pre">/parse</span></code> and <code class="docutils literal notranslate"><span class="pre">/continue</span></code> endpoints used for running actions
remotely. This has been replaced by the action server that allows you
to run your action code in any language. There are no replacement endpoints
for these two, as the flow of information has been changed: Instead of you
calling Rasa Core to update the tracker and receive the next action to be
executed, Rasa Core will call your action server once it predicted an action.
More information can be found in the updated docs for <a class="reference internal" href="../customactions/#customactions"><span class="std std-ref">Actions</span></a>.</li>
</ul>
</div>
<div class="section" id="webhooks">
<h3>Webhooks<a class="headerlink" href="#webhooks" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">The endpoints for the webhooks changed. All webhooks are now at
<code class="docutils literal notranslate"><span class="pre">/webhooks/CHANNEL_NAME/webhook</span></code>. For example, the webhook
to receive facebook messages on a local instance is now
<code class="docutils literal notranslate"><span class="pre">http://localhost:5005/webhooks/facebook/webhook</span></code>.</p>
</li>
<li><p class="first">format of the <code class="docutils literal notranslate"><span class="pre">credentials.yml</span></code> used in the <code class="docutils literal notranslate"><span class="pre">run</span></code> and <code class="docutils literal notranslate"><span class="pre">server</span></code> scripts
has changed to allow for multiple channels in one file:</p>
<p>The new format now contains the channels name first, e.g. for facebook:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">facebook</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">verify</span><span class="p p-Indicator">:</span> <span class="s">&quot;rasa-bot&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">secret</span><span class="p p-Indicator">:</span> <span class="s">&quot;3e34709d01ea89032asdebfe5a74518&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">page-access-token</span><span class="p p-Indicator">:</span> <span class="s">&quot;EAAbHPa7H9rEBAAuFk4Q3gPKbDedQnx4djJJ1JmQ7CAqO4iJKrQcNT0wtD&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="changes-to-input-and-output-channels">
<h3>Changes to Input and Output Channels<a class="headerlink" href="#changes-to-input-and-output-channels" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">ConsoleOutputChannel</span></code> and <code class="docutils literal notranslate"><span class="pre">ConsoleInputChannel</span></code> have been removed. Either
use the <a class="reference external" href="https://github.com/RasaHQ/rasa_core/blob/master/rasa_core/run.py">run script</a>
to run your bot on the cmdline, or adapt the <code class="docutils literal notranslate"><span class="pre">serve_application</span></code>
<a class="reference external" href="https://github.com/RasaHQ/rasa_core/blob/master/rasa_core/run.py#L260">function</a>
to run from a python script.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">rasa_core.channels.direct</span></code> output channel package removed.
<code class="docutils literal notranslate"><span class="pre">CollectingOutputChannel</span></code> moved to <code class="docutils literal notranslate"><span class="pre">rasa_core.channels.channel</span></code></p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">HttpInputComponent</span></code> renamed to <code class="docutils literal notranslate"><span class="pre">InputChannel</span></code> &amp; moved to
<code class="docutils literal notranslate"><span class="pre">rasa_core.channels.channel.InputChannel</span></code></p>
</li>
<li><p class="first">If you wrote your own custom input channel, make sure to inherit from
<code class="docutils literal notranslate"><span class="pre">InputChannel</span></code> instead of <code class="docutils literal notranslate"><span class="pre">HttpInputComponent</span></code>.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">CollectingOutput</span></code> channel will no properly collect events for images,
buttons, and attachments. The content of the collected messages has changed,
<code class="docutils literal notranslate"><span class="pre">data</span></code> is now called <code class="docutils literal notranslate"><span class="pre">buttons</span></code>.</p>
</li>
<li><p class="first">removed package <code class="docutils literal notranslate"><span class="pre">rasa_core.channels.rest</span></code>,
please use <code class="docutils literal notranslate"><span class="pre">rasa_core.channels.RestInput</span></code> instead</p>
</li>
<li><p class="first">remove file input channel <code class="docutils literal notranslate"><span class="pre">rasa_core.channels.file.FileInputChannel</span></code></p>
</li>
<li><p class="first">signature of <code class="docutils literal notranslate"><span class="pre">agent.handle_channel</span></code> got renamed
and the signature changed. here is an up to date example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rasa_core.channels.facebook</span> <span class="kn">import</span> <span class="n">FacebookInput</span>

<span class="n">input_channel</span> <span class="o">=</span> <span class="n">FacebookInput</span><span class="p">(</span><span class="n">fb_verify</span><span class="o">=</span><span class="s2">&quot;VERIFY&quot;</span><span class="p">,</span>
                              <span class="n">fb_secret</span><span class="o">=</span><span class="s2">&quot;SECRET&quot;</span><span class="p">,</span>
                              <span class="n">fb_access_token</span><span class="o">=</span><span class="s2">&quot;ACCESS_TOKEN&quot;</span><span class="p">)</span>
<span class="n">agent</span><span class="o">.</span><span class="n">handle_channels</span><span class="p">([</span><span class="n">input_channel</span><span class="p">],</span> <span class="n">port</span><span class="o">=</span><span class="mi">5005</span><span class="p">,</span> <span class="n">serve_forever</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">If you wrote your own custom output channel, make sure to split messages
on double new lines if you like (the <code class="docutils literal notranslate"><span class="pre">InputChannel</span></code> you inherit from
doesn’t do this anymore), e.g.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">send_text_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recipient_id</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="c1"># type: (Text, Text) -&gt; None</span>
    <span class="sd">&quot;&quot;&quot;Send a message through this channel.&quot;&quot;&quot;</span>

    <span class="k">for</span> <span class="n">message_part</span> <span class="ow">in</span> <span class="n">message</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">):</span>
      <span class="c1"># self.send would be the actual communication to e.g. facebook</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">recipient_id</span><span class="p">,</span> <span class="n">message_part</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="x-to-0-10-0">
<span id="migration-to-0-10-0"></span><h2>0.9.x to 0.10.0<a class="headerlink" href="#x-to-0-10-0" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This is a release <strong>breaking backwards compatibility</strong>.
You can no longer load old models with this version, due to the addition of
the default action <code class="docutils literal notranslate"><span class="pre">ActionDefaultFallback</span></code>. Please make sure to retrain
your model before using this version</p>
</div>
<p>There have been some API changes to classes and methods:</p>
<ul>
<li><p class="first">if you use <code class="docutils literal notranslate"><span class="pre">dispatcher.utter_template</span></code> or
<code class="docutils literal notranslate"><span class="pre">dispatcher.utter_button_template</span></code> in your custom actions run code,
they now need the <code class="docutils literal notranslate"><span class="pre">tracker</span></code> as a second argument, e.g.
<code class="docutils literal notranslate"><span class="pre">dispatcher.utter_template(&quot;utter_greet&quot;,</span> <span class="pre">tracker)</span></code></p>
</li>
<li><p class="first">all input and output channels should have a <code class="docutils literal notranslate"><span class="pre">name</span></code>. If you are using a
custom channel, make sure to implement a class method that returns
the name. The name needs to be added to the
<strong>input channel and the output channel</strong>. You can find examples
in <code class="docutils literal notranslate"><span class="pre">rasa_core.channels.direct.CollectingOutputChannel</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Every channel needs a name&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;collector&quot;</span>
</pre></div>
</div>
</li>
<li><p class="first">the <code class="docutils literal notranslate"><span class="pre">RasaNLUHttpInterpreter</span></code> when created now needs to be passed an
instance of <code class="docutils literal notranslate"><span class="pre">EndpointConfig</span></code> instead of <code class="docutils literal notranslate"><span class="pre">server</span></code> and <code class="docutils literal notranslate"><span class="pre">token</span></code>, e.g.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rasa_core.utils</span> <span class="kn">import</span> <span class="n">EndpointConfig</span>

<span class="n">endpoint</span> <span class="o">=</span> <span class="n">EndpointConfig</span><span class="p">(</span><span class="s2">&quot;http://localhost:500&quot;</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="s2">&quot;mytoken&quot;</span><span class="p">)</span>
<span class="n">interpreter</span> <span class="o">=</span> <span class="n">RasaNLUHttpInterpreter</span><span class="p">(</span><span class="s2">&quot;mymodelname&quot;</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="x-to-0-9-0">
<span id="migration-to-0-9-0"></span><h2>0.8.x to 0.9.0<a class="headerlink" href="#x-to-0-9-0" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This is a release <strong>breaking backwards compatibility</strong>.
Unfortunately, it is not possible to load
previously trained models (as the stored file formats have changed as
well as the configuration and metadata). Please make sure to retrain
a model before trying to use it with this improved version.</p>
</div>
<ul>
<li><p class="first">loading data should be done either using:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rasa_core</span> <span class="kn">import</span> <span class="n">training</span>

<span class="n">training_data</span> <span class="o">=</span> <span class="n">training</span><span class="o">.</span><span class="n">load_data</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>or using an agent instance:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">training_data</span> <span class="o">=</span> <span class="n">agent</span><span class="o">.</span><span class="n">load_data</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">agent</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">training_data</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>It is deprecated to pass the training data file directly to <code class="docutils literal notranslate"><span class="pre">agent.train</span></code>.
Instead, the data should be loaded in one of the above ways and then passed
to train.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">ScoringPolicy</span></code> got removed and replaced by <code class="docutils literal notranslate"><span class="pre">AugmentedMemoizationPolicy</span></code>
which is similar, but is able to match more states to states it has seen
during trainer (e.g. it is able to handle slots better)</p>
</li>
<li><p class="first">if you use custom featurizers, you need to
<strong>pass them directly to the policy</strong> that should use them.
This allows the policies to use different featurizers. Passing a featurizer
is <strong>optional</strong>. Accordingly, the <code class="docutils literal notranslate"><span class="pre">max_history</span></code> parameter moved to that
featurizer:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rasa_core.featurizers</span> <span class="kn">import</span> <span class="p">(</span><span class="n">MaxHistoryTrackerFeaturizer</span><span class="p">,</span>
                                   <span class="n">BinarySingleStateFeaturizer</span><span class="p">)</span>

<span class="n">featurizer</span> <span class="o">=</span> <span class="n">MaxHistoryTrackerFeaturizer</span><span class="p">(</span><span class="n">BinarySingleStateFeaturizer</span><span class="p">(),</span>
                                         <span class="n">max_history</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="n">agent</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span><span class="n">domain_file</span><span class="p">,</span>
              <span class="n">policies</span><span class="o">=</span><span class="p">[</span><span class="n">MemoizationPolicy</span><span class="p">(</span><span class="n">max_history</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
                        <span class="n">KerasPolicy</span><span class="p">(</span><span class="n">featurizer</span><span class="p">)])</span>
</pre></div>
</div>
<p>If no featurizer is passed during policy creation, the policies default
featurizer will be used. The <cite>MemoizationPolicy</cite> allows passing in the
<cite>max_history</cite> parameter directly, without creating a featurizer.</p>
</li>
<li><p class="first">the ListSlot now stores a list of entities (with the same name)
present in an utterance</p>
</li>
</ul>
</div>
<div class="section" id="x-to-0-8-0">
<span id="migration-to-0-8-0"></span><h2>0.7.x to 0.8.0<a class="headerlink" href="#x-to-0-8-0" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Credentials for the facebook connector changed. Instead of providing:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># OLD FORMAT</span>
<span class="l l-Scalar l-Scalar-Plain">verify</span><span class="p p-Indicator">:</span> <span class="s">&quot;rasa-bot&quot;</span>
<span class="l l-Scalar l-Scalar-Plain">secret</span><span class="p p-Indicator">:</span> <span class="s">&quot;3e34709d01ea89032asdebfe5a74518&quot;</span>
<span class="l l-Scalar l-Scalar-Plain">page-tokens</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">1730621093913654</span><span class="p p-Indicator">:</span> <span class="s">&quot;EAAbHPa7H9rEBAAuFk4Q3gPKbDedQnx4djJJ1JmQ7CAqO4iJKrQcNT0wtD&quot;</span>
</pre></div>
</div>
<p>you should now pass the configuration parameters like this:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># NEW FORMAT</span>
<span class="l l-Scalar l-Scalar-Plain">verify</span><span class="p p-Indicator">:</span> <span class="s">&quot;rasa-bot&quot;</span>
<span class="l l-Scalar l-Scalar-Plain">secret</span><span class="p p-Indicator">:</span> <span class="s">&quot;3e34709d01ea89032asdebfe5a74518&quot;</span>
<span class="l l-Scalar l-Scalar-Plain">page-access-token</span><span class="p p-Indicator">:</span> <span class="s">&quot;EAAbHPa7H9rEBAAuFk4Q3gPKbDedQnx4djJJ1JmQ7CAqO4iJKrQcNT0wtD&quot;</span>
</pre></div>
</div>
<p>As you can see, the new facebook connector only supports a single page. Same
change happened to the in code arguments for the connector which should be
changed to:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rasa_core.channels.facebook</span> <span class="kn">import</span> <span class="n">FacebookInput</span>

<span class="n">FacebookInput</span><span class="p">(</span>
      <span class="n">credentials</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;verify&quot;</span><span class="p">),</span>
      <span class="n">credentials</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;secret&quot;</span><span class="p">),</span>
      <span class="n">credentials</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;page-access-token&quot;</span><span class="p">))</span>
</pre></div>
</div>
</li>
<li><p class="first">Story file format changed from <code class="docutils literal notranslate"><span class="pre">*</span> <span class="pre">_intent_greet[name=Rasa]</span></code>
to <code class="docutils literal notranslate"><span class="pre">*</span> <span class="pre">intent_greet{&quot;name&quot;:</span> <span class="pre">&quot;Rasa&quot;}</span></code> (old format is still supported but
deprecated). Instead of writing:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre><span></span><span class="gu">##</span> story_07715946                     &lt;!-- name of the story - just for debugging --&gt;
<span class="k">*</span> _greet
   <span class="k">-</span> action_ask_howcanhelp
<span class="k">*</span> _inform[location=rome,price=cheap]
   <span class="k">-</span> action_on_it                     &lt;!-- user utterance, in format _intent[entities] --&gt;
   <span class="k">-</span> action_ask_cuisine
</pre></div>
</div>
<p>The new format looks like this:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre><span></span><span class="gu">##</span> story_07715946                     &lt;!-- name of the story - just for debugging --&gt;
<span class="k">*</span> greet
   <span class="k">-</span> action_ask_howcanhelp
<span class="k">*</span> inform{&quot;location&quot;: &quot;rome&quot;, &quot;price&quot;: &quot;cheap&quot;}
   <span class="k">-</span> action_on_it                     &lt;!-- user utterance, in format _intent[entities] --&gt;
   <span class="k">-</span> action_ask_cuisine
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="have-questions-or-feedback">
<h2>Have questions or feedback?<a class="headerlink" href="#have-questions-or-feedback" title="Permalink to this headline">¶</a></h2>
<p>We have a very active support community on <a class="reference external" href="https://forum.rasa.com">Rasa Community Forum</a>
that is happy to help you with your questions. If you have any feedback for us or a specific
suggestion for improving the docs, feel free to share it by creating an issue on Rasa Core
<a class="reference external" href="https://github.com/RasaHQ/rasa_core/issues">GitHub repository</a>.</p>
</div>
</div>


	    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
	    <script type="text/javascript"> docsearch({
	     apiKey: '1f9e0efb89e98543f6613a60f847b176',
	     indexName: 'rasa',
	     inputSelector: 'body > div.nav-top > .nav-container > .nav > input',
	     debug: false // Set debug to true if you want to inspect the dropdown
	    });
	    </script>
          </div>

          <div class="footer">

            <div class="social">
              <a href="https://github.com/RasaHQ" target="_blank" title="GitHub"><i class="fab fa-github"></i></a>
              <a href="https://stackoverflow.com/search?q=rasa" target="_blank" title="Stack Overflow"><i class="fab fa-stack-overflow"></i></a>
              <a href="https://www.youtube.com/channel/UCJ0V6493mLvqdiVwOKWBODQ" target="_blank" title="YouTube"><i class="fab fa-youtube"></i></a>
              <a href="https://twitter.com/rasa_hq" target="_blank" title="Twitter"><i class="fab fa-twitter"></i></a>
            </div>

            <div class="copyright small">
            &copy;2018, Rasa Technologies GmbH | <a href="https://rasa.com/imprint/" target="_blank">Imprint</a> | <a href="https://rasa.com/privacy-policy/" target="_blank">Privacy Policy</a>
            
            </div>

          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>

    

  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag(...arguments) {
      dataLayer.push(...arguments);
    }
    gtag('js', new Date());
    gtag('config', 'UA-87333416-1', {
      'anonymize_ip': true,
    });
  </script>
  <script src="https://rasa.com/assets/js/js.cookies.js"></script>
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <!-- TODO: Re-Enable once Klaro is re-activated again. Remove the next two lines, then.
  <script type="opt-in" data-name="googleanalytics" data-type="text/javascript" data-src="https://www.googletagmanager.com/gtag/js?id=UA-87333416-1"></script>
  <script type="opt-in" data-name="googleanalytics" data-type="text/javascript" data-src="https://rasa.com/assets/js/userId.js"></script>
  -->
  <script src="https://www.googletagmanager.com/gtag/js?id=UA-87333416-1"></script>
  <script src="https://rasa.com/assets/js/userId.js"></script>
  <script type="text/javascript">
    var clipboard = new ClipboardJS('.copyable');
    clipboard.on('success', function(e) {
      gtag('event', e.action, {
        'event_category': 'code',
        'event_label': e.text
      });
      const id = e.text.slice(0,3);
      document.getElementById(id).classList.add('visible');
      setTimeout(function(){
        document.getElementById(id).classList.remove('visible');},
        800
      );
    });
    clipboard.on('error', function(e) {
      console.log(e);
    });
  </script>

  <!-- onsite anchor fix (otherwise anchors scroll to far) -->
  <script>
    /* Adapted from https://stackoverflow.com/a/13067009/1906073 */
    (function(document, history, location) {
      var HISTORY_SUPPORT = !!(history && history.pushState);

      var anchorScrolls = {
        ANCHOR_REGEX: /^#[^ ]+$/,
        OFFSET_HEIGHT_PX: 66,

        /**
         * Establish events, and fix initial scroll position if a hash is provided.
         */
        init: function() {
          this.scrollToCurrent();
          $(window).on('hashchange', $.proxy(this, 'scrollToCurrent'));
          $('body').on('click', 'a', $.proxy(this, 'delegateAnchors'));
        },

        /**
         * Return the offset amount to deduct from the normal scroll position.
         * Modify as appropriate to allow for dynamic calculations
         */
        getFixedOffset: function() {
          return this.OFFSET_HEIGHT_PX;
        },

        /**
         * If the provided href is an anchor which resolves to an element on the
         * page, scroll to it.
         * @param  {String} href
         * @return {Boolean} - Was the href an anchor.
         */
        scrollIfAnchor: function(href, pushToHistory) {
          var match, anchorOffset;

          if(!this.ANCHOR_REGEX.test(href)) {
            return false;
          }

          match = document.getElementById(href.slice(1));

          if(match) {
            anchorOffset = $(match).offset().top - this.getFixedOffset();
            $('html, body').animate({ scrollTop: anchorOffset});

            // Add the state to history as-per normal anchor links
            if(HISTORY_SUPPORT && pushToHistory) {
              history.pushState({}, document.title, location.pathname + href);
            }
          }

          return !!match;
        },

        /**
         * Attempt to scroll to the current location's hash.
         */
        scrollToCurrent: function(e) {
          if(this.scrollIfAnchor(window.location.hash) && e) {
            e.preventDefault();
          }
        },

        /**
         * If the click event's target was an anchor, fix the scroll position.
         */
        delegateAnchors: function(e) {
          var elem = e.target;

          if(this.scrollIfAnchor(elem.getAttribute('href'), true)) {
            e.preventDefault();
          }
        }
      };

      $(document).ready($.proxy(anchorScrolls, 'init'));
    })(window.document, window.history, window.location);

  </script>
  <div id="webchat">
  <script src="https://storage.googleapis.com/mrbot-cdn/webchat-0.4.2.js"></script>
  <script>
   WebChat.default.init({
       selector: "#webchat",
       initPayload: "/greet",
       interval: 500,
       socketUrl: "https://website-demo.rasa.com/",
       title: "Sara",
       subtitle: "I'm still in development",
       profileAvatar: "https://rasa.com/assets/img/demo/sara_avatar.png",
       showCloseButton: true,
       fullScreenMode: false,})
  </script>
  </div>
  </body>
</html>