

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Domains and Actions &mdash; Rasa Core 0.7.0a5 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/banner.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Rasa Core 0.7.0a5 documentation" href="index.html"/>
        <link rel="next" title="Tracking Conversation State" href="state.html"/>
        <link rel="prev" title="Connecting to messaging &amp; voice platforms" href="connectors.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Rasa Core
          

          
          </a>

          
            
            
              <div class="version">
                0.7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="read_first.html">Read this first</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation and Hello World</a></li>
<li class="toctree-l1"><a class="reference internal" href="tour.html">A Quick Tour (no ML)</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_scratch.html">A Bot From Scratch</a></li>
</ul>
<p class="caption"><span class="caption-text">More Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorial_babi.html">Supervised Learning Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_fake_user.html">Interactive Learning with a Fake User</a></li>
</ul>
<p class="caption"><span class="caption-text">Deep Dives</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="patterns.html">Common Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="http.html">Using Rasa Core as a HTTP server</a></li>
<li class="toctree-l1"><a class="reference internal" href="slot_types.html">Slot Types Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="plumbing.html">Plumbing - How it all fits together</a></li>
<li class="toctree-l1"><a class="reference internal" href="connectors.html">Connecting to messaging &amp; voice platforms</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Domains and Actions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#defining-custom-actions">Defining Custom Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#putting-it-all-together">Putting it all together</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="state.html">Tracking Conversation State</a></li>
<li class="toctree-l1"><a class="reference internal" href="policies.html">Creating Policies</a></li>
<li class="toctree-l1"><a class="reference internal" href="stories.html">Stories Data Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="scheduling.html">Scheduling Reminders</a></li>
<li class="toctree-l1"><a class="reference internal" href="featurisation.html">Featurization</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpreters.html">Interpreters</a></li>
<li class="toctree-l1"><a class="reference internal" href="message_handling.html">Message Handling</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/agent.html">Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/events.html">Events</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Change Log</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Rasa Core</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Domains and Actions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/domains_actions.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

/* nice headers on first paragraph of info/warning boxes */
.admonition .first {
    margin: -12px;
    padding: 6px 12px;
    margin-bottom: 12px;
    color: #fff;
    line-height: 1;
    display: block;
}
.admonition.warning .first {
    background: #f0b37e;
}
.admonition.note .first {
    background: #6ab0de;
}
.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="domains-and-actions">
<h1>Domains and Actions<a class="headerlink" href="#domains-and-actions" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal"><span class="pre">Domain</span></code> defines the universe in which your bot operates. It specifies exactly:</p>
<ul class="simple">
<li>which <code class="docutils literal"><span class="pre">intents</span></code> you are expecting to respond to</li>
<li>which <code class="docutils literal"><span class="pre">slots</span></code> you wish to track</li>
<li>which <code class="docutils literal"><span class="pre">actions</span></code> your bot can take</li>
</ul>
<p>For example, the <code class="docutils literal"><span class="pre">DefaultDomain</span></code> has the following yaml definition (no slots here - but we will get there):</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">intents</span><span class="p p-Indicator">:</span>
 <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">greet</span>
 <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">default</span>
 <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">goodbye</span>

<span class="l l-Scalar l-Scalar-Plain">entities</span><span class="p p-Indicator">:</span>
 <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span>

<span class="l l-Scalar l-Scalar-Plain">templates</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">utter_greet</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="s">&quot;hey</span><span class="nv"> </span><span class="s">there!&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">utter_goodbye</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="s">&quot;goodbye</span><span class="nv"> </span><span class="s">:(&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">utter_default</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="s">&quot;default</span><span class="nv"> </span><span class="s">message&quot;</span>

<span class="l l-Scalar l-Scalar-Plain">actions</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">utter_default</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">utter_greet</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">utter_goodbye</span>
</pre></div>
</div>
<p><strong>What does this mean?</strong></p>
<p>An <code class="docutils literal"><span class="pre">intent</span></code> is a string like <code class="docutils literal"><span class="pre">&quot;greet&quot;</span></code> or <code class="docutils literal"><span class="pre">&quot;restaurant_search&quot;</span></code>.
It describes what your user <em>probably meant to say</em>.
For example, &#8220;show me Mexican restaurants&#8221;, and &#8220;I want to have lunch&#8221;
could both be described as a <code class="docutils literal"><span class="pre">restaurant_search</span></code> intent.</p>
<p><code class="docutils literal"><span class="pre">slots</span></code> are the things you want to keep track of during a conversation.
For example, in the messages above you would want to store &#8220;Mexican&#8221; as a cuisine type.
The tracker has an attribute like <code class="docutils literal"><span class="pre">tracker.get_slot(&quot;cuisine&quot;)</span></code> which will return <code class="docutils literal"><span class="pre">&quot;Mexican&quot;</span></code></p>
<p><code class="docutils literal"><span class="pre">actions</span></code> are the things your bot can actually do.
They are invoked by calling the <code class="docutils literal"><span class="pre">action.run()</span></code> method.
For example, an <code class="docutils literal"><span class="pre">action</span></code> can:</p>
<ul class="simple">
<li>respond to a user</li>
<li>make an external API call</li>
<li>query a database</li>
</ul>
<div class="section" id="defining-custom-actions">
<h2>Defining Custom Actions<a class="headerlink" href="#defining-custom-actions" title="Permalink to this headline">¶</a></h2>
<p>The easiest are <code class="docutils literal"><span class="pre">UtterActions</span></code>, which just send a message to the user. You define them by adding an entry to the
action list that is named after the utterance. E.g. if there should be an action that utters the template called
<code class="docutils literal"><span class="pre">utter_greet</span></code> you need to add <code class="docutils literal"><span class="pre">greet</span></code> to the list of defined actions. In the above example yaml you can see that
all three of the defined actions are just named after utter templates and hence just respond with a message to
the user.</p>
<p><strong>What about more complicated actions?</strong>
To continue with the restaurant example, if the user says &#8220;show me a Mexican restaurant&#8221;,
your bot would execute the action <code class="docutils literal"><span class="pre">ActionCheckRestaurants</span></code>, which might look like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rasa_core.actions</span> <span class="k">import</span> <span class="n">Action</span>
<span class="kn">from</span> <span class="nn">rasa_core.events</span> <span class="k">import</span> <span class="n">SetSlot</span>

<span class="k">class</span> <span class="nc">ActionCheckRestaurants</span><span class="p">(</span><span class="n">Action</span><span class="p">):</span>
   <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="k">return</span> <span class="s2">&quot;check_restaurants&quot;</span>

   <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dispatcher</span><span class="p">,</span> <span class="n">tracker</span><span class="p">,</span> <span class="n">domain</span><span class="p">):</span>
      <span class="n">cuisine</span> <span class="o">=</span> <span class="n">tracker</span><span class="o">.</span><span class="n">get_slot</span><span class="p">(</span><span class="s1">&#39;cuisine&#39;</span><span class="p">)</span>
      <span class="n">q</span> <span class="o">=</span> <span class="s2">&quot;select * from restaurants where cuisine=&#39;</span><span class="si">{0}</span><span class="s2">&#39; limit 1&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cuisine</span><span class="p">)</span>
      <span class="n">result</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>

      <span class="k">return</span> <span class="p">[</span><span class="n">SetSlot</span><span class="p">(</span><span class="s2">&quot;matches&quot;</span><span class="p">,</span> <span class="n">result</span> <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">[])]</span>
</pre></div>
</div>
<p>Note that actions <strong>do not mutate the tracker directly</strong>.
Instead, an action can return <code class="docutils literal"><span class="pre">events</span></code> which are logged by the tracker and used to modify its
own state.</p>
</div>
<div class="section" id="putting-it-all-together">
<h2>Putting it all together<a class="headerlink" href="#putting-it-all-together" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s add just this one new action to a custom domain (assuming we stored the
action in a module called <code class="docutils literal"><span class="pre">restaurant.actions</span></code>):</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">intents</span><span class="p p-Indicator">:</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">greet</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">default</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">goodbye</span>

<span class="l l-Scalar l-Scalar-Plain">entities</span><span class="p p-Indicator">:</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span>

<span class="l l-Scalar l-Scalar-Plain">templates</span><span class="p p-Indicator">:</span>
   <span class="l l-Scalar l-Scalar-Plain">utter_greet</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;hey</span><span class="nv"> </span><span class="s">there!&quot;</span>
   <span class="l l-Scalar l-Scalar-Plain">utter_goodbye</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;goodbye</span><span class="nv"> </span><span class="s">:(&quot;</span>
   <span class="l l-Scalar l-Scalar-Plain">utter_default</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;default</span><span class="nv"> </span><span class="s">message&quot;</span>

<span class="l l-Scalar l-Scalar-Plain">actions</span><span class="p p-Indicator">:</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">default</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">greet</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">goodbye</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">restaurant.actions.ActionCheckRestaurants</span>
</pre></div>
</div>
<p>The point of this is just to show how the pieces fit together. As you can see, in the <code class="docutils literal"><span class="pre">actions</span></code> section
of your domain, you can list utter actions (which respond an utter template to the user) as well as custom
actions using their module path.</p>
<p>For an example you can run, check the <a class="reference internal" href="tutorial_scratch.html"><span class="doc">A Bot From Scratch</span></a>.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="state.html" class="btn btn-neutral float-right" title="Tracking Conversation State" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="connectors.html" class="btn btn-neutral" title="Connecting to messaging &amp; voice platforms" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Rasa Technologies GmbH.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Other Versions</span>
        v: 0.7.0a5
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Tags</dt>
            <dd><a href="../0.6.5/domains_actions.html">0.6.5</a></dd>
            <dd><a href="../0.6.9/index.html">0.6.9</a></dd>
            <dd><a href="../0.7.0/index.html">0.7.0</a></dd>
            <dd><a href="../0.7.0a10/index.html">0.7.0a10</a></dd>
            <dd><a href="domains_actions.html">0.7.0a5</a></dd>
            <dd><a href="../0.7.0a6/domains_actions.html">0.7.0a6</a></dd>
            <dd><a href="../0.7.0a7/domains_actions.html">0.7.0a7</a></dd>
            <dd><a href="../0.7.0a8/domains_actions.html">0.7.0a8</a></dd>
            <dd><a href="../0.7.0a9/index.html">0.7.0a9</a></dd>
            <dd><a href="../0.7.1/index.html">0.7.1</a></dd>
            <dd><a href="../0.7.2/index.html">0.7.2</a></dd>
            <dd><a href="../0.7.3/index.html">0.7.3</a></dd>
            <dd><a href="../0.7.4/index.html">0.7.4</a></dd>
            <dd><a href="../0.7.5/index.html">0.7.5</a></dd>
            <dd><a href="../0.7.6/index.html">0.7.6</a></dd>
            <dd><a href="../0.7.7/index.html">0.7.7</a></dd>
            <dd><a href="../0.7.8/index.html">0.7.8</a></dd>
            <dd><a href="../0.7.9/index.html">0.7.9</a></dd>
            <dd><a href="../0.8.0/index.html">0.8.0</a></dd>
            <dd><a href="../0.8.1/index.html">0.8.1</a></dd>
            <dd><a href="../0.8.2/index.html">0.8.2</a></dd>
            <dd><a href="../0.8.3/index.html">0.8.3</a></dd>
            <dd><a href="../0.8.4/index.html">0.8.4</a></dd>
            <dd><a href="../0.8.5/index.html">0.8.5</a></dd>
            <dd><a href="../0.8.6/index.html">0.8.6</a></dd>
            <dd><a href="../0.9.0/index.html">0.9.0</a></dd>
            <dd><a href="../0.9.0a1/index.html">0.9.0a1</a></dd>
            <dd><a href="../0.9.0a2/index.html">0.9.0a2</a></dd>
            <dd><a href="../0.9.0a3/index.html">0.9.0a3</a></dd>
            <dd><a href="../0.9.0a5/index.html">0.9.0a5</a></dd>
            <dd><a href="../0.9.0a7/index.html">0.9.0a7</a></dd>
            <dd><a href="../0.9.1/index.html">0.9.1</a></dd>
            <dd><a href="../0.9.2/index.html">0.9.2</a></dd>
            <dd><a href="../0.9.3/index.html">0.9.3</a></dd>
            <dd><a href="../0.9.4/index.html">0.9.4</a></dd>
            <dd><a href="../0.9.5/index.html">0.9.5</a></dd>
            <dd><a href="../0.9.6/index.html">0.9.6</a></dd>
        </dl>
        <dl>
            <dt>Branches</dt>
            <dd><a href="../0.9.x/index.html">0.9.x</a></dd>
            <dd><a href="../add-auth/index.html">add-auth</a></dd>
            <dd><a href="../apscheduler_try/index.html">apscheduler_try</a></dd>
            <dd><a href="../async/index.html">async</a></dd>
            <dd><a href="../direct_input/index.html">direct_input</a></dd>
            <dd><a href="../dispatcher/index.html">dispatcher</a></dd>
            <dd><a href="../embed_policy/index.html">embed_policy</a></dd>
            <dd><a href="../eval_scripts/index.html">eval_scripts</a></dd>
            <dd><a href="../event-stream/index.html">event-stream</a></dd>
            <dd><a href="../fix/index.html">fix</a></dd>
            <dd><a href="../master/index.html">master</a></dd>
            <dd><a href="../model-pull/index.html">model-pull</a></dd>
            <dd><a href="../track_data/index.html">track_data</a></dd>
            <dd><a href="../wildcard/domains_actions.html">wildcard</a></dd>
        </dl>
    </div>
</div>


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.7.0a5',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>